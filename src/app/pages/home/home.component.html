<app-nav></app-nav>
<div class="container">
    <div class="container">
        <button class="btn btn-success" routerLink="/cadastro">Cadastrar novo produto</button>
    </div>

    <div class="btn-group" dropdown>
        <button type="button" class="btn btn-danger">Ações</button>
        <button id="button-split" type="button" dropdownToggle
            class="btn btn-danger dropdown-toggle dropdown-toggle-split" aria-controls="dropdown-split">
            <span class="caret"></span>
            <span class="sr-only visually-hidden">Ações</span>
        </button>
        <ul id="dropdown-split" *dropdownMenu class="dropdown-menu" role="menu" aria-labelledby="button-split">
            <li role="menuitem"><a class="dropdown-item" href="#">Alterar informações</a></li>
            <li class="divider dropdown-divider"></li>
            <li role="menuitem"><a class="dropdown-item" (click)="logout()">Sair</a>
            </li>
        </ul>
    </div>
</div>
<div class="form-floating mb-3">
    <input type="email" class="form-control" id="floatingInput" placeholder="digite o nome do produto" (input)="serach($event)">
    <label for="floatingInput">Procurar produtos</label>
  </div>

    <table class="table table-bordered table-hover">
        <thead class="table-dark">
            <tr>
                <th></th>
                <th>Nome</th>
                <th>Quantidade</th>
                <th>Link</th>
                <th>Preço</th>
                <th></th>
                <th></th>
            </tr>
        </thead>
        <tbody *ngFor="let produto of produtos">
            <tr>
                <td>
                    <div *ngIf="produto.ativo == true; else inativo">
                        <img src="assets/images/Ativo.png" alt="" style="height: 20px; width: 20px;">
                    </div>
                    <ng-template #inativo>
                        <img src="assets/images/Inativo.png" alt="" style="height: 20px; width: 20px;">
                    </ng-template>

                </td>
                <td>{{produto.nome}}</td>
                <td>{{produto.quantidade}}</td>
                <td class="td-link">{{produto.link}}</td>
                <td>{{ produto.preco | currency:'BRL':'symbol':'1.2-2' }}</td>
                <td>
                    <button class="btn btn-primary" routerLink="/editar/{{produto.id}}">Editar</button>
                    <button class="btn btn-info" routerLink="/detalhes/{{produto.id}}">Detalhes</button>
                </td>
                <td>
                    <button type="button" class="btn btn-danger" (click)="openModal(template)">Excluir</button>
                </td>
            </tr>
        </tbody>
    </table>

    <ng-template #template>
        <div class="modal-header">
          <h4 class="modal-title pull-left">Deseja realmente deletar este produto?</h4>
          <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="modalRef?.hide()">
            <span aria-hidden="true" class="visually-hidden">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <button type="button" class="btn btn-danger">Sim</button>
            <button type="button" class="btn btn-secondary" (click)="modalRef?.hide()">Não</button>
        </div>
      </ng-template>